CustomCalendar As CanvasComponent:
    DefaultDate: =Today()
    Fill: =RGBA(0, 0, 0, 0)
    Height: =640
    OnReset: =
    SelectedDate: =_dateSelected
    Width: =480
    X: =0
    Y: =0
    ZIndex: =1

    Rectangle1_1 As rectangle:
        BorderColor: =RGBA(32, 54, 71, 1)
        BorderThickness: =2
        Fill: =RGBA(255, 255, 255, 1)
        Height: =27
        Width: =250
        X: =27
        Y: =22
        ZIndex: =1

    LblMonthSelected As label:
        Align: =Align.Center
        Fill: =RGBA(58, 58, 58, 0)
        FocusedBorderColor: =LblMonthSelected.BorderColor
        Height: =26
        HoverBorderColor: =LblMonthSelected.BorderColor
        HoverColor: =LblMonthSelected.Color
        HoverFill: =LblMonthSelected.Fill
        OnSelect: =Set(_YMvisible,!_YMvisible)
        PressedBorderColor: =LblMonthSelected.BorderColor
        PressedColor: =LblMonthSelected.Color
        PressedFill: =LblMonthSelected.Fill
        Size: =7
        Text: =Text(_firstDayOfMonth, "mmmm yyyy")
        Width: =102
        Wrap: =false
        X: =72
        Y: =22
        ZIndex: =2

    WeekdayGallery As gallery.WeekdayGallery:
        AccessibleLabel: ="Days of the week"
        BorderThickness: =2
        DisabledBorderColor: =WeekdayGallery.BorderColor
        DisabledFill: =WeekdayGallery.Fill
        Fill: =RGBA(255, 255, 255, 1)
        Height: =27
        HoverBorderColor: =WeekdayGallery.BorderColor
        HoverFill: =WeekdayGallery.Fill
        Items: =Calendar.WeekdaysShort()
        PressedBorderColor: =WeekdayGallery.BorderColor
        PressedFill: =WeekdayGallery.Fill
        ShowScrollbar: =false
        TemplatePadding: =0
        TemplateSize: =36
        Width: =250
        X: =27
        Y: =50
        ZIndex: =3

        Title1_1 As label:
            Align: =Align.Center
            FocusedBorderColor: =Title1_1.BorderColor
            Height: =WeekdayGallery.TemplateHeight
            HoverBorderColor: =Title1_1.BorderColor
            HoverColor: =Title1_1.Color
            HoverFill: =Title1_1.Fill
            OnSelect: =Select(Parent)
            PressedBorderColor: =Title1_1.BorderColor
            PressedColor: =Title1_1.Color
            PressedFill: =Title1_1.Fill
            Size: =7
            Text: =ThisItem.Value
            VerticalAlign: =Middle
            Width: =WeekdayGallery.TemplateWidth
            Wrap: =false
            X: =WeekdayGallery.TemplateWidth / 2 - Title1_1.Width / 2
            Y: =WeekdayGallery.TemplateHeight / 2 - Title1_1.Height / 2
            ZIndex: =1

    MonthDayGallery As gallery.MonthDayGallery:
        AccessibleLabel: ="Days of selected month"
        BorderThickness: =2
        DisabledBorderColor: =MonthDayGallery.BorderColor
        DisabledFill: =MonthDayGallery.Fill
        Fill: =RGBA(255, 255, 255, 1)
        Height: =101
        HoverBorderColor: =MonthDayGallery.BorderColor
        HoverFill: =MonthDayGallery.Fill
        Items: =[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19, 20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41]
        Layout: =Layout.Vertical
        PressedBorderColor: =MonthDayGallery.BorderColor
        PressedFill: =MonthDayGallery.Fill
        ShowScrollbar: =false
        TemplatePadding: =0
        TemplateSize: =20
        Width: =250
        WrapCount: =7
        X: =27
        Y: =77
        ZIndex: =4

        Subcircle1_1 As circle:
            DisabledFill: =Subcircle1_1.Fill
            Fill: =RGBA(149, 149, 149, 1)
            FocusedBorderColor: =Subcircle1_1.BorderColor
            Height: =2 * Title2_4.Size
            HoverFill: =Subcircle1_1.Fill
            OnSelect: =Select(Parent)
            PressedFill: =Subcircle1_1.Fill
            Visible: =And(DateAdd(_firstDayInView, ThisItem.Value) = _dateSelected, Title2_4.Visible)
            Width: =Subcircle1_1.Height
            X: =MonthDayGallery.TemplateWidth/2 - Subcircle1_1.Width/2
            Y: =MonthDayGallery.TemplateHeight / 2 - Subcircle1_1.Height / 2
            ZIndex: =2

        Title2_4 As label:
            Align: =Align.Center
            BorderColor: =RGBA(0, 0, 0, 0)
            Color: =If(DateAdd(_firstDayInView, ThisItem.Value) = _dateSelected, RGBA(255, 255, 255, 1), DateAdd(_firstDayInView, ThisItem.Value) = Today(), RGBA(47, 41, 43, 1), LblMonthSelected.Color)
            Fill: |-
                =/*Fill value changes if the gallery item day = today, or if it lies outside of the current month*/             
                If(
                    /*Date selected is today*/
                    DateAdd(_firstDayInView, ThisItem.Value) = Today() && DateAdd(_firstDayInView, ThisItem.Value) = _dateSelected, RGBA(0,0,0,0),
                    /*Today when it is not selected*/
                    DateAdd(_firstDayInView, ThisItem.Value) = Today(), ColorFade(Subcircle1_1.Fill, 0.67), 
                    /*The day is outside the range of the currently selected month*/
                    Abs(Title2_4.Text - ThisItem.Value) > 10,RGBA(200, 200, 200, 0.3), RGBA(0, 0, 0, 0))
            FocusedBorderColor: =Title2_4.Color
            FocusedBorderThickness: =2
            Height: =MonthDayGallery.TemplateHeight
            HoverBorderColor: =Title2_4.BorderColor
            HoverColor: =Title2_4.Color
            HoverFill: =Title2_4.Fill
            OnSelect: |-
                =Set(_dateSelected, DateAdd(_firstDayInView, ThisItem.Value, Days));
                Set(showDate,false);
                If(_dateSelected< Today(),Notify("You can not selected this date as its been already passed",NotificationType.Error);
                Set(_dateSelected,Blank()));
                
                If(_dateSelected> DateAdd(Today(),182.5),Notify("You can not selected this date as its been already passed",NotificationType.Error);
                Set(_dateSelected,Blank()));
                //If(DateAdd(_firstDayInView, ThisItem.Value, Days) <(Today()) && DateAdd(_firstDayInView, ThisItem.Value, Days) >
                //(DateAdd(Today(),182.5)),false,Set(_dateSelected, DateAdd(_firstDayInView, ThisItem.Value, Days));
                //Set(showDate,false))
            PressedBorderColor: =Title2_4.BorderColor
            PressedColor: =Title2_4.Color
            PressedFill: =Title2_4.Fill
            Size: =7
            TabIndex: =0
            Text: =Day(DateAdd(_firstDayInView,ThisItem.Value,Days))
            VerticalAlign: =Middle
            Visible: |-
                =/*This item is in a row containing no days of the visible month. It is in the row after the row where the last day of the month occurs*/ 
                 !(DateAdd(_firstDayInView,ThisItem.Value,Days) - Weekday(DateAdd(_firstDayInView,ThisItem.Value,Days)) + 1 > _lastDayOfMonth)
            Width: =MonthDayGallery.TemplateWidth
            Wrap: =false
            ZIndex: =3

    TodayIcon As icon.CalendarBlank:
        Color: =RGBA(32, 54, 71, 1)
        DisabledFill: =TodayIcon.Fill
        FocusedBorderColor: =TodayIcon.BorderColor
        Height: =20
        HoverBorderColor: =ColorFade(TodayIcon.BorderColor, 20%)
        HoverColor: =ColorFade(TodayIcon.Color, 20%)
        HoverFill: =TodayIcon.Fill
        Icon: =Icon.Cancel
        OnSelect: =Set(showDate,false)
        PaddingBottom: =5
        PaddingLeft: =5
        PaddingRight: =5
        PaddingTop: =5
        PressedBorderColor: =ColorFade(TodayIcon.BorderColor, -20%)
        PressedColor: =ColorFade(TodayIcon.Color, -20%)
        PressedFill: =TodayIcon.Fill
        Width: =20
        X: =250
        Y: =25
        ZIndex: =5

    SetDefaultTimer As timer:
        AutoStart: =true
        BorderColor: =ColorFade(SetDefaultTimer.Fill, -15%)
        DisabledBorderColor: =ColorFade(SetDefaultTimer.BorderColor, 70%)
        DisabledColor: =ColorFade(SetDefaultTimer.Fill, 90%)
        DisabledFill: =ColorFade(SetDefaultTimer.Fill, 70%)
        Duration: =30
        FocusedBorderColor: =SetDefaultTimer.BorderColor
        HoverBorderColor: =ColorFade(SetDefaultTimer.BorderColor, 20%)
        OnTimerStart: |-
            =Set(_YMvisible,false);
            Set(_dateSelected, CustomCalendar.DefaultDate);
            Set(_firstDayOfMonth, DateAdd(CustomCalendar.DefaultDate, 1 - Day(CustomCalendar.DefaultDate), Days));
            Set(_firstDayInView, DateAdd(_firstDayOfMonth, -(Weekday(_firstDayOfMonth) - 2 + 1), Days));
            Set(_lastDayOfMonth, DateAdd(DateAdd(_firstDayOfMonth, 1, Months), -1, Days))
        PressedBorderColor: =SetDefaultTimer.Fill
        PressedColor: =SetDefaultTimer.Fill
        PressedFill: =SetDefaultTimer.Color
        Text: |-
            =Text(Time(0, 0, SetDefaultTimer.Value/1000), "hh:mm:ss")
        Visible: =false
        X: =14
        Y: =559
        ZIndex: =11

    iconPrevMonth As icon.ChevronLeft:
        DisabledFill: =iconPrevMonth.Fill
        FocusedBorderColor: =iconPrevMonth.BorderColor
        Height: =20
        HoverBorderColor: =ColorFade(iconPrevMonth.BorderColor, 20%)
        HoverColor: =ColorFade(iconPrevMonth.Color, 20%)
        HoverFill: =iconPrevMonth.Fill
        Icon: =Icon.ChevronLeft
        OnSelect: |-
            =/*changes month view to previous month*/
            Set(_firstDayOfMonth, DateAdd(_firstDayOfMonth, -1, Months));
            Set(_firstDayInView, DateAdd(_firstDayOfMonth, -(Weekday(_firstDayOfMonth) - 2 + 1), Days));
            Set(_lastDayOfMonth, DateAdd(DateAdd(_firstDayOfMonth, 1, Months), -1, Days));
            /*collects calendar events for all days in current month view. Updates _minDate to prevent duplicate data collection if user returns to this month view*/
            If(_minDate > _firstDayOfMonth, Set(_minDate, _firstDayOfMonth))
        PaddingBottom: =5
        PaddingLeft: =5
        PaddingRight: =5
        PaddingTop: =5
        PressedBorderColor: =ColorFade(iconPrevMonth.BorderColor, -20%)
        PressedColor: =ColorFade(iconPrevMonth.Color, -20%)
        PressedFill: =iconPrevMonth.Fill
        Tooltip: ="View previous month"
        Width: =20
        X: =50
        Y: =25
        ZIndex: =14

    iconNextMonth As icon.ChevronRight:
        DisabledFill: =iconNextMonth.Fill
        FocusedBorderColor: =iconNextMonth.BorderColor
        Height: =20
        HoverBorderColor: =ColorFade(iconNextMonth.BorderColor, 20%)
        HoverColor: =ColorFade(iconNextMonth.Color, 20%)
        HoverFill: =iconNextMonth.Fill
        Icon: =Icon.ChevronRight
        OnSelect: |-
            =/*changes month view to next month*/
            Set(_firstDayOfMonth, DateAdd(_firstDayOfMonth, 1, Months));
            Set(_firstDayInView, DateAdd(_firstDayOfMonth, -(Weekday(_firstDayOfMonth) - 2 + 1), Days));
            /*collects calendar events for all days in current month view. Updates _maxDate to prevent duplicate data collection if user returns to this month view*/
            Set(_lastDayOfMonth, DateAdd(DateAdd(_firstDayOfMonth, 1, Months), -1, Days));
            If(_lastDayOfMonth > _maxDate, Set(_maxDate, _lastDayOfMonth))
        PaddingBottom: =5
        PaddingLeft: =5
        PaddingRight: =5
        PaddingTop: =5
        PressedBorderColor: =ColorFade(iconNextMonth.BorderColor, -20%)
        PressedColor: =ColorFade(iconNextMonth.Color, -20%)
        PressedFill: =iconNextMonth.Fill
        Tooltip: ="View next month"
        Width: =20
        X: =180
        Y: =25
        ZIndex: =15

    YearMonthPicker As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =15

        FrameShadow As rectangle:
            DisabledFill: =FrameShadow.Fill
            DisplayMode: =DisplayMode.View
            Fill: =RGBA(128, 128, 128, 0.6)
            FocusedBorderColor: =FrameShadow.BorderColor
            Height: =70
            HoverFill: =FrameShadow.Fill
            PressedFill: =FrameShadow.Fill
            Visible: =_YMvisible
            Width: =200
            X: =52
            Y: =77
            ZIndex: =6

        Frame As rectangle:
            BorderColor: =RGBA(32, 54, 71, 1)
            BorderThickness: =2
            DisabledFill: =Frame.Fill
            Fill: =RGBA(255, 255, 255, 1)
            FocusedBorderColor: =Frame.BorderColor
            Height: =70
            HoverFill: =Frame.Fill
            PressedFill: =Frame.Fill
            Visible: =_YMvisible
            Width: =200
            X: =52
            Y: =75
            ZIndex: =7

        btnSetYearMonth As button:
            BorderColor: =RGBA(32, 54, 71, 1)
            Color: =RGBA(32, 54, 71, 1)
            Fill: =RGBA(255, 255, 255, 1)
            FocusedBorderColor: =btnSetYearMonth.BorderColor
            Height: =20
            HoverBorderColor: =ColorFade(btnSetYearMonth.BorderColor, 20%)
            HoverFill: =ColorFade(Self.Fill, -20%)
            OnSelect: |-
                =Set(_dateSelected, Date(Value(ddYear.SelectedText.Value),Value(ddMonth.SelectedText.Value),1));
                Set(_firstDayOfMonth, DateAdd(Date(Value(ddYear.SelectedText.Value),Value(ddMonth.SelectedText.Value),1), 1 - Day(Date(Value(ddYear.SelectedText.Value),Value(ddMonth.SelectedText.Value),1)), Days));
                Set(_firstDayInView, DateAdd(_firstDayOfMonth, -(Weekday(_firstDayOfMonth) - 2 + 1), Days));
                Set(_lastDayOfMonth, DateAdd(DateAdd(_firstDayOfMonth, 1, Months), -1, Days));
                Set(_YMvisible,false)
            PressedBorderColor: =btnSetYearMonth.Fill
            PressedColor: =btnSetYearMonth.Fill
            PressedFill: =btnSetYearMonth.Color
            Size: =7
            Text: ="OK"
            Visible: =_YMvisible
            Width: =30
            X: =210
            Y: =105
            ZIndex: =8

        lblYear As label:
            Fill: =RGBA(255, 255, 255, 1)
            FocusedBorderColor: =lblYear.BorderColor
            Height: =27
            HoverBorderColor: =lblYear.BorderColor
            HoverColor: =lblYear.Color
            HoverFill: =lblYear.Fill
            PressedBorderColor: =lblYear.BorderColor
            PressedColor: =lblYear.Color
            PressedFill: =lblYear.Fill
            Size: =7
            Text: ="Year"
            Visible: =_YMvisible
            Width: =65
            X: =60
            Y: =77
            ZIndex: =9

        lblMonth As label:
            Fill: =RGBA(255, 255, 255, 1)
            FocusedBorderColor: =lblMonth.BorderColor
            Height: =27
            HoverBorderColor: =lblMonth.BorderColor
            HoverColor: =lblMonth.Color
            HoverFill: =lblMonth.Fill
            PressedBorderColor: =lblMonth.BorderColor
            PressedColor: =lblMonth.Color
            PressedFill: =lblMonth.Fill
            Size: =7
            Text: ="Month"
            Visible: =_YMvisible
            Width: =65
            X: =135
            Y: =77
            ZIndex: =10

        ddMonth As dropdown:
            BorderColor: =RGBA(32, 54, 71, 1)
            ChevronBackground: =RGBA(149, 149, 149, 1)
            ChevronHoverBackground: =ColorFade(Self.Fill, -20%)
            FocusedBorderColor: =ddMonth.BorderColor
            Height: =20
            HoverBorderColor: =ColorFade(ddMonth.BorderColor, 15%)
            Items: |-
                =["1","2","3","4","5","6","7","8","9","10","11","12"]
                
                
                    
            PressedBorderColor: =ddMonth.HoverBorderColor
            SelectionFill: =RGBA(149, 149, 149, 1)
            Size: =7
            Visible: =_YMvisible
            Width: =65
            X: =135
            Y: =105
            ZIndex: =12

        ddYear As dropdown:
            BorderColor: =RGBA(32, 54, 71, 1)
            ChevronBackground: =RGBA(149, 149, 149, 1)
            ChevronHoverBackground: =ColorFade(Self.Fill, -20%)
            FocusedBorderColor: =ddYear.BorderColor
            Height: =20
            HoverBorderColor: =ColorFade(ddYear.BorderColor, 15%)
            Items: |-
                =//["1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022"]
                If(Year(Today())=Year(DateAdd(Today(),182.5)),[Year(Today())],[Year(Today()),Year(DateAdd(Today(),182.5))])
            PaddingBottom: =5
            PaddingLeft: =5
            PaddingRight: =5
            PaddingTop: =5
            PressedBorderColor: =ddYear.HoverBorderColor
            SelectionFill: =RGBA(149, 149, 149, 1)
            Size: =7
            Visible: =_YMvisible
            Width: =65
            X: =60
            Y: =105
            ZIndex: =13

